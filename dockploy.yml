# Dockploy Configuration File
# This file helps Dockploy understand how to deploy your application

name: taalimflow
type: docker-compose

# Build configuration
build:
  context: .
  dockerfile: Dockerfile

# Environment variables (set these in Dockploy dashboard)
environment:
  - NODE_ENV=production
  - PORT=3001
  - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
  - TELEGRAM_CHAT_ID=${TELEGRAM_CHAT_ID}

# Port mapping
ports:
  - "3001:3001"

# Health check configuration
healthcheck:
  test: ["CMD", "curl", "-f", "http://localhost:3001/api/health"]
  interval: 30s
  timeout: 10s
  retries: 3
  start_period: 40s

# Restart policy
restart: unless-stopped

# Resource limits (adjust based on your VPS specs)
deploy:
  resources:
    limits:
      memory: 512M
      cpus: '0.5'
    reservations:
      memory: 256M
      cpus: '0.25'
